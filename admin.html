<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"><title>Admin Panel</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {font-family:'Poppins',sans-serif;background:#17304B;color:#fff;padding:0;margin:0;}
    .admin-box {max-width:500px;margin:40px auto;background:#fff;color:#17304B;padding:28px 20px 20px 20px;border-radius:16px;box-shadow:0 6px 28px 0 #1976d244;}
    h1 {text-align:center;}
    .hidden{display:none;}
    .logout-btn{margin:1.5em 0 0 0;padding:7px 22px;border-radius:8px;border:none;background:#1976d2;color:#fff;font-weight:600;cursor:pointer;}
    .tab-nav{display:flex;gap:8px;margin:0 0 18px 0;}
    .tab-nav button{flex:1;background:#e3f2fd;color:#17304B;border:none;padding:10px 4px;border-radius:8px;font-weight:600;cursor:pointer;}
    .tab-nav button.active{background:#1976d2;color:#fff;}
    .tab-content{background:#f6fafd;padding:16px 16px;border-radius:10px;max-height:260px;overflow:auto;}
    ul{margin:9px 0 0 18px;}
    small{color:#1976d2;}
    .visitbox{background:#d0e6f9;color:#17304B;border-radius:8px;margin:13px 0 14px 0;padding:7px 13px;font-size:1.02em;}
    @media (max-width:520px){.admin-box{margin:13px 2vw}}
  </style>
</head>
<body>
  <div class="admin-box">
    <h1>Admin Panel</h1>
    <form id="loginForm">
      <input type="password" id="adminPwd" placeholder="Password" style="width:85%;padding:10px;border-radius:8px;border:1px solid #1976d2;font-size:1.1em;">
      <button style="margin:12px 0 0 0;padding:8px 22px;border-radius:8px;border:none;background:#1976d2;color:#fff;font-weight:600;cursor:pointer;">Login</button>
      <div id="loginError" style="color:#e22;font-weight:600;margin-top:9px;display:none;">Wrong password!</div>
    </form>
    <div id="adminContent" class="hidden">
      <div class="visitbox"><b>Today's Visitors:</b> <span id="todayVisit">0</span></div>
      <div class="tab-nav">
        <button class="active" data-tab="appt">Appointments</button>
        <button data-tab="price">Price Checks</button>
        <button data-tab="estimate">Estimates</button>
      </div>
      <div class="tab-content" id="tab-appt"></div>
      <div class="tab-content hidden" id="tab-price"></div>
      <div class="tab-content hidden" id="tab-estimate"></div>
      <button class="logout-btn" onclick="location.reload()">Logout</button>
    </div>
  </div>
  <script>
    // Simple password auth
    const PWD = "admin123";
    document.getElementById('loginForm').onsubmit = function(e){
      e.preventDefault();
      if(document.getElementById('adminPwd').value === PWD){
        this.classList.add('hidden');
        document.getElementById('loginError').style.display='none';
        document.getElementById('adminContent').classList.remove('hidden');
        loadTabs();
      }else{
        document.getElementById('loginError').style.display='block';
      }
    };
    // Tabs
    const navBtns = document.querySelectorAll('.tab-nav button');
    navBtns.forEach(btn=>{
      btn.onclick = function(){
        navBtns.forEach(b=>b.classList.remove('active'));
        this.classList.add('active');
        ['appt','price','estimate'].forEach(tab=>{
          document.getElementById('tab-'+tab).classList.add('hidden');
        });
        document.getElementById('tab-'+this.dataset.tab).classList.remove('hidden');
      };
    });
    function loadTabs(){
      function render(name, fields){
        let arr=JSON.parse(localStorage.getItem(name)||'[]');
        if(arr.length===0) return "<i>No records yet.</i>";
        return '<ul>'+arr.map(d=>'<li>'+fields.map(f=>`<b>${f[0]}</b>: ${d[f[1]]}`).join(' | ')+' <small>('+d.time+')</small></li>').join('')+'</ul>';
      }
      // Visitor count
      let stats = JSON.parse(localStorage.getItem('visitors_stats')||'{}');
      let today = new Date().toISOString().slice(0,10);
      document.getElementById('todayVisit').textContent = stats[today]||0;
      // Tabs
      document.getElementById('tab-appt').innerHTML = render('appointments', [['Name','name'],['Phone','phone']]);
      document.getElementById('tab-price').innerHTML = render('priceChecks', [['Product','product'],['Size','size']]);
      document.getElementById('tab-estimate').innerHTML = render('estimates', [['Name','name'],['Phone','phone'],['Details','details']]);
    }
  </script>
</body>
</html>
